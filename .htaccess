
# Active l'exécution des scripts PHP
<IfModule mod_php7.c>
    php_flag display_errors on
    php_value error_reporting E_ALL
</IfModule>

# Si le module mod_php7 n'est pas chargé, essayons avec mod_php8
<IfModule mod_php8.c>
    php_flag display_errors on
    php_value error_reporting E_ALL
</IfModule>

# Assurer que les fichiers .php sont correctement interprétés
<IfModule mod_mime.c>
    AddType application/x-httpd-php .php
</IfModule>

# Rediriger toutes les requêtes non-fichiers vers index.html pour le routing React
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    
    # Si le fichier ou dossier demandé existe réellement, servir directement
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]
    
    # Ne pas rediriger les requêtes vers /api
    RewriteRule ^api/ - [L]
    
    # Rediriger toutes les autres requêtes vers index.html
    RewriteRule ^ index.html [L]
</IfModule>

# Force PHP execution (added for improved reliability)
<Files *.php>
    SetHandler application/x-httpd-php
</Files>

# Fix pour Infomaniak - si PHP n'est pas exécuté
<IfModule mod_fcgid.c>
    AddHandler fcgid-script .php
    FcgidWrapper /usr/local/php8.2/bin/php-cgi .php
</IfModule>

# Définir l'index par défaut
DirectoryIndex index.html index.php

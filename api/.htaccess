
# Force PHP interpretation
Options +ExecCGI
AddHandler application/x-httpd-php .php

<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Set proper error document
    ErrorDocument 500 "PHP Error occurred. Please check server logs."
    
    # Set the proper headers
    <FilesMatch "\.php$">
        SetHandler application/x-httpd-php
        # Force the content type to be text/plain for easier debugging
        Header set Content-Type "text/plain; charset=UTF-8"
    </FilesMatch>
    
    # Allow OPTIONS for CORS
    RewriteCond %{REQUEST_METHOD} OPTIONS
    RewriteRule ^(.*)$ $1 [R=200,L]
    
    # Allow direct access to PHP files
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteRule ^(.+)\.php$ $1.php [L]
    
    # Set CORS headers for all responses
    Header always set Access-Control-Allow-Origin "*"
    Header always set Access-Control-Allow-Methods "GET, POST, OPTIONS, PUT, DELETE"
    Header always set Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept, Authorization"
    Header always set Access-Control-Max-Age "1728000"
</IfModule>

# PHP specific settings - Using .user.ini instead of php_flag directives
# Note: php_flag directives are removed as they're not supported by your Apache configuration

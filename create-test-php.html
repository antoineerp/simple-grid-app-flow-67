
<!DOCTYPE html>
<html>
<head>
    <title>Création de fichier PHP de test</title>
</head>
<body>
    <h1>Création d'un fichier PHP de test</h1>
    
    <script>
        // Cette page crée un fichier PHP de test via JavaScript
        window.onload = function() {
            const url = new URLSearchParams(window.location.search);
            const filename = url.get('filename') || 'test-php-file.php';
            
            // Créer un élément pour afficher l'état
            const status = document.createElement('div');
            document.body.appendChild(status);
            status.innerHTML = "Tentative de création du fichier " + filename + "...";
            
            // Créer le fichier de test à l'aide d'un iframe
            const iframe = document.createElement('iframe');
            iframe.style.display = 'none';
            document.body.appendChild(iframe);
            
            // Contenu du fichier PHP en HTML
            const content = `
            <!DOCTYPE html>
            <html>
            <head>
                <title>Test PHP</title>
                <style>
                    body { font-family: Arial, sans-serif; margin: 20px; }
                    .code { background: #f5f5f5; padding: 10px; border-radius: 5px; }
                </style>
            </head>
            <body>
                <h1>Test d'exécution PHP</h1>
                
                <div class="code">
                <?php
                // Ce code devrait s'exécuter si PHP fonctionne
                echo "PHP fonctionne! Heure serveur: " . date('Y-m-d H:i:s');
                ?>
                </div>
                
                <p>Si vous voyez du code PHP brut ci-dessus (commençant par &lt;?php), alors PHP n'est pas exécuté sur votre serveur.</p>
            </body>
            </html>
            `;
            
            // Essayer de créer le fichier en le téléchargeant
            try {
                const blob = new Blob([content], { type: 'text/html' });
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                
                status.innerHTML = "Fichier " + filename + " créé et téléchargé. <br>Veuillez le téléverser manuellement sur votre serveur, puis revenir à la page précédente pour continuer le test.";
            } catch (e) {
                status.innerHTML = "Erreur lors de la création du fichier: " + e.message;
            }
        }
    </script>
</body>
</html>
